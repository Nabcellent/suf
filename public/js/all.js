$((function(){var e,t=$("#global_alert");0!==t.length&&t.hasClass("show")&&(e=t.data("duration"),setTimeout((function(){t.addClass("hide"),t.removeClass("show")}),e*=1e3));var n,a=$("#mega_nav .menu"),o=$("#mega_nav .menu .menu_main"),r=$(".mobile_menu_head > .go_back"),i=$("#mega_nav .mobile_menu_trigger"),s=$("#mega_nav .mobile_menu_head .mobile_menu_close");$(document).on("click",o,(function(e){if($("#mega_nav .current_menu_title").html("Su-F").css("padding-left","1rem"),a.hasClass("active")&&e.target.closest(".menu_item_has_children")){var t=e.target.closest(".menu_item_has_children");u(t)}})),$(i).click((function(){l()})),$(r).click((function(){c()})),$(s).click((function(){l()})),$("#mega_nav .menu_overlay").click((function(){l()}));var l=function(){a.toggleClass("active"),$("#mega_nav .menu_overlay").toggleClass("active")},u=function(e){(n=e.querySelector(".sub_menu")).classList.add("active"),n.style.animation="slide_left .5s ease forwards";var t=e.querySelector("span").parentNode.childNodes[0].textContent;$("#mega_nav .current_menu_title").html(t).css("padding-left",0),$("#mega_nav .mobile_menu_head").addClass("active")},c=function(){n.style.animation="slide_right .5s ease forwards",$("#mega_nav .current_menu_title").html("Su-F"),$("#mega_nav .mobile_menu_head").removeClass("active")};$((function(){var e=window.location.href;$("#mega_nav ul li a").each((function(){$(this).prop("href")===e&&$(this).addClass("active")}))})),window.onresize=function(){window.innerWidth>991.98?($("#mega_nav .nav_link.products").attr("href","../../products.php"),$("#mega_nav .menu").hasClass("active")&&l()):$("#mega_nav .nav_link.products").attr("href","#")},window.innerWidth>991.98?$("#mega_nav .nav_link.products").attr("href","/products"):$("#mega_nav .nav_link.products").attr("href","#"),$(".item_right form").on("mouseenter mouseleave",(function(){""===$(this).find("input").val()&&$(this).find("input").toggleClass("active")})),$(".item_right input").blur((function(){""===$(this).val()?$(this).removeClass("active"):""===$(this).val()||$(this).hasClass("active")||$(this).addClass("active")})),$((function(){$('#cart td.quantity input[type="number"]').niceNumber({autoSize:!1,buttonDecrement:"<i class='bx bx-minus font-weight-bold'></i>",buttonIncrement:"<i class='bx bx-plus font-weight-bold'></i>",buttonPosition:"around",onDecrement:!1,onIncrement:!1})})),$(".info_icon").on("mouseenter",(function(){$($(this)).parent().next().find(".info_text").css("color","rgb(217, 180, 60)")})).on("mouseleave",(function(){$($(this)).parent().next().find(".info_text").css("color","rgb(184, 134, 11)")}))})),jQuery.cachedScript=function(e,t){return t=$.extend(t||{},{dataType:"script",cache:!0,url:e}),jQuery.ajax(t)},$(document).on("change",'input[type="file"]',(function(){var e=$(this).val().replace("C:\\fakepath\\","");$(this).next(".custom-file-label").html(e)})),jQuery.validator.setDefaults({errorClass:"is-invalid",validClass:"is-valid",errorPlacement:function(e,t){e.addClass("error"),"radio"===t.prop("type")?e.insertAfter(t.closest(".form-group")):"file"===t.prop("type")?e.insertAfter(t.closest("div")):t.closest(".input-group").length>0?e.insertAfter(t.parent(".input-group")):t.hasClass("anime_input")?e.insertAfter(t.closest("label")):t.hasClass("crud_form")?e.insertAfter(t):"checkbox"===t.prop("type")?e.insertAfter(t.closest(".form-group")):e.insertAfter(t)}}),jQuery.validator.addMethod("alphaSpecial",(function(e,t){return this.optional(t)||/^[a-zA-Z]+(?:(?:\.|[' ])([a-zA-Z])*)*$/i.test(e)}),"Letters, apostrophes and dots only please."),$((function(){new Swiper(".product_swiper",{slidesPerView:"auto",spaceBetween:10,loop:!0,loopFillGroupWithBlank:!0,mousewheel:!0,autoplay:{delay:7e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{576:{loop:!1,loopFillGroupWithBlank:!1,slidesPerView:2,spaceBetween:5},640:{slidesPerView:2,spaceBetween:20},768:{spaceBetween:13}}});var e=$(".swiper-slide"),t=new Swiper(".gallery-thumbs",{spaceBetween:10,slidesPerView:3,freeMode:!0,loopedSlides:3,watchSlidesVisibility:!0,watchSlidesProgress:!0}),n=new Swiper(".gallery-top",{spaceBetween:10,loop:!0,loopedSlides:3,grabCursor:!0,autoplay:{delay:2e3,disableOnInteraction:!0},pagination:{el:".swiper-pagination",dynamicBullets:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:t},on:{init:function(e){1===e.activeIndex&&(this.autoplay=!1)}}});e.on("mouseover",(function(){n.autoplay.stop()})),e.on("mouseout",(function(){n.autoplay.start()}));var a=$(".gallery-top .swiper-slide");a.on("mousemove",(function(e){var t=$(this).width(),n=$(this).height(),a=e.offsetX/t*100,o=e.offsetY/n*100;$(this).css("background-position","".concat(a,"% ").concat(o,"%"))})),a.on("mouseleave",(function(){$(this).css("background-position","center")}))})),(()=>{$((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}})})),$(document).on("click",".pagination a",(function(t){t.preventDefault();var n=$(this).attr("href").split("page=")[1];e("/products?page="+n)})),$(document).on("change","#products #sort_by",(function(){e("/products?page=1")})),$(document).on("click",".product_check",(function(){e("/products")})),$(document).on("change","#products nav #per_page",(function(){e("/products")}));var e=function(e){$("#loader").show();var n=$("#products #sort_by").val(),a=parseInt($("#products nav #per_page").val()),o=t("category"),r=t("sub_category"),i=t("seller"),s=t("brand"),l=location.href.split("/products/")[1];$.ajax({data:{sort:n,categoryId:l,perPage:a,category:o,subCategory:r,seller:i,brand:s},type:"GET",url:e,success:function(e){$("#product_section").html(e),$("#loader").hide()}})};function t(e){var t=[];return $("#"+e+":checked").each((function(){t.push($(this).val())})),t}$(document).on("click",'#details input[name^="variant"]',(function(){var e=[],t=$(this).attr("data-id");$('#details input[name^="variant"]:checked').each((function(){e.push($(this).val())})),$.ajax({data:{variations:e,productId:t},type:"POST",url:"/get-product-price",success:function(e){e.discount>0?($("#details .variation_price").html(e.discount_price),$("#details del").html(e.unit_price+"/=")):$("#details .variation_price").html(e.discount_price)},error:function(){alert("Error")}})})),$(document).on("click","#cart .cart_table td.quantity button",(function(){var e=$(this).parents("td.quantity").find($('input[type="number"]')),t=parseInt(e.val()),a=e.data("id");t>0?n(a,t):alert("Error: Quantity must be at least 1!")})),$(document).on("change",'#cart .cart_table td.quantity input[type="number"]',(function(){if($(this).val()<1)$(this).val(1);else{var e=parseInt($(this).val(),10),t=$(this).data("id");n(t,e)}}));var n=function(e,t){$.ajax({data:{cartId:e,newQty:t},type:"POST",url:"/update-cart-item-qty",success:function(e){$("#cart #cart_table").html(e.view),$(".cart_count").html(e.cartCount),$("#mega_nav .item_right .cart_total p").html(e.cartTotal+"/="),e.status||Swal.fire({position:"top-end",icon:"info",title:"Sorryyâ˜¹",text:e.message,timer:5e3}),$.cachedScript("js/jquery.nice-number.js").done((function(e,t){console.log(t)})),$.cachedScript("js/main.js").done((function(e,t){console.log(t)}))},error:function(){alert("Error")}})};function a(e){$.ajax({data:e,type:"POST",url:"/get-sub-counties",statusCode:{404:function(e,t,n){alert("Not Found")},200:function(e,t){$('#delivery-address form select[name="sub_county"]').html(e.subCounties)},503:function(e,t,n){alert("Unavailable")}},error:function(){alert("Error: Something went wrong")}}).done((function(e){})).fail((function(e,t){alert("Something went wrong: "+t)}))}$((function(){var e=$("#delivery-address form #county");e.val().trim()&&a({id:e.val(),subCounty:$("#delivery-address form #county :selected").attr("data-subCounty")})})),$(document).on("click","#delivery-address form #county",(function(){var e=$(this).val();console.log($(this).is(":selected")),a({id:e})}))})(),$((function(){$("#register_form").validate({rules:{first_name:{required:!0,minlength:3,alphaSpecial:!0},last_name:{required:!0,minlength:3,alphaSpecial:!0},email:{required:!0,email:!0,remote:"/check-email"},phone:{required:!0,digits:!0,minlength:9,maxlength:12,remote:"/check-phone"},gender:"required",password:{required:!0,minlength:4},password_confirmation:{required:!0,equalTo:"#password"}},messages:{first_name:{required:"Please enter your first name.",minlength:"Last name should be more than 3 characters long."},last_name:{required:"Please enter your last name.",minlength:"Last name should be more than 3 characters long."},email:{required:"Please enter your email address",email:"Please enter a valid email address",remote:"This email is already in use."},phone:{required:"Please provide your phone number.",digits:"Only numbers are allowed.",pattern:"Invalid phone number",remote:"This phone number is already in use."},gender:"Please choose your gender.",password:{required:"Please provide a password.",minlength:"Password must be at least 6 characters."},password_confirmation:{required:"Kindly confirm your new password.",equalTo:"Both passwords must be the same."}}}),$("#login_form").validate({rules:{email:{required:!0,email:!0},password:"required"},messages:{email:"Your email address is required.",password:"Your password is required."}}),$("form#contact_us").validate({rules:{first_name:"required",last_name:"required",email:"required",subject:"required",message:"required"},messages:{first_name:"Your email or phone number is required.",last_name:"Your password is required."}}),$("#profile-form").validate({rules:{first_name:{required:!0,minlength:3},last_name:{required:!0,minlength:3}},messages:{first_name:{required:"Please enter your first name.",minlength:"Last name should be more than 3 characters long."},last_name:{required:"Please enter your last name.",minlength:"Last name should be more than 3 characters long."},phone:{required:"Please provide your phone number.",digits:"Only numbers are allowed.",pattern:"Invalid phone number",remote:"This phone number is already in use."}}}),$("#change-password").validate({rules:{current_password:"required",password:{required:!0,minlength:4},password_confirmation:{required:!0,equalTo:"#password"}},messages:{current_password:"Please confirm your current password",password:{required:"Please provide a new password.",minlength:"Password must be at least 6 characters."},password_confirmation:{required:"Kindly confirm your new password.",equalTo:"Your new passwords do not match."}}}),$('#edit-profile #change-password input[name="current_password"]').keyup((function(){var e=this,t=$(this).val();$.ajax({data:{current_password:t},type:"POST",url:"/check-password",success:function(t){t?($(e).addClass("is-valid"),$(e).removeClass("is-invalid")):($(e).addClass("is-invalid"),$(e).removeClass("is-valid")),console.log(t)},error:function(){alert("Error")}})})),$("#delivery-address-form").validate({rules:{county:"required",sub_county:"required",address:"required"},messages:{county:"Please select your County.",sub_county:"please select your Sub-county.",address:"Please input a small description of where your stay (like; house number, street/drive, estate/court)"}})})),$(document).on("click",".add-phone",(function(){var e=!1;$(document).on("keyup",".swal-input",(function(){var t=$(this).val(),n=$("#phone-form input");t.match(/^((?:254|\+254|0)?((?:7(?:3[0-9]|5[0-6]|(8[5-9]))|1[0][0-2])[0-9]{6})|(?:254|\+254|0)?((?:7(?:[01249][0-9]|5[789]|6[89])|1[1][0-5])[0-9]{6})|^(?:254|\+254|0)?(77[0-6][0-9]{6})$)$/)?(n.removeClass("is-invalid"),n.addClass("is-valid"),$("#phone-form strong").text(""),e=!0):(n.removeClass("is-valid"),n.addClass("is-invalid"),$("#phone-form strong").text("Invalid phone number"))})),function t(){Swal.fire({title:"Enter Your phone number",html:'<form id="phone-form"><div class="input-group">\n      <div class="input-group-prepend">          <span class="input-group-text">+254</span>      </div>      <input type="tel" class="form-control swal-input" name="phone" aria-label              placeholder="123456789" pattern="^((?:254|\\+254|0)?((?:7(?:3[0-9]|5[0-6]|(8[5-9]))|1[0][0-2])[0-9]{6})|(?:254|\\+254|0)?((?:7(?:[01249][0-9]|5[789]|6[89])|1[1][0-5])[0-9]{6})|^(?:254|\\+254|0)?(77[0-6][0-9]{6})$)$">  <span class="invalid-feedback" role="alert"><strong></strong></span></div></form>',inputAttributes:{autocapitalize:"off",required:!0},showCancelButton:!0,confirmButtonText:"ADD",showLoaderOnConfirm:!0,preConfirm:function(){var t=$("#phone-form input");return e?$.ajax({data:{phone:t.val()},type:"PATCH",url:"/add-phone",statusCode:{500:function(e,t,n){}},success:function(e){return e},error:function(){Swal.fire({text:"Something went wrong. Please contact @LÃ¨_â€¢Ã‡apuchÃ´nâœ“ðŸ©¸",footer:'<a href="mailto:su-fashion10@gmail.com">su-fashion10@gmail.com</a>'})}}):(t.addClass("is-invalid"),$("#phone-form strong").text("The phone number is invalid. (hint: it must be 9 digits omitt the leading 0)"),!1)},allowOutsideClick:function(){return!Swal.isLoading()}}).then((function(e){e.isConfirmed&&(void 0!==e.value?e.value.status?Swal.fire({icon:"success",text:e.value.message}).then((function(){location.reload()})):(e.value.message,Swal.fire({icon:"info",title:"Oops!",text:e.value.message}).then((function(){t()}))):Swal.fire({icon:"danger",title:"Sorry!",text:"Something went wrong. Please contact @LÃ¨_â€¢Ã‡apuchÃ´nâœ“ðŸ©¸",footer:'<a href="mailto:su-fashion10@gmail.com">su-fashion10@gmail.com</a>'}))}))}()})),$(document).on("click","#cart .delete_cart_item",(function(){var e=parseInt($(this).data("id"),10);confirm("Are you sure you want to delete this cart item?")&&Swal.fire({title:"Are you really sure? ðŸ¤§",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){t.isConfirmed&&$.ajax({data:{cartId:e},type:"POST",url:"/delete-cart-item",success:function(e){e.status?e.cartCount>0?(Swal.fire("Deleted!","Your cart item has been deleted.","success"),$("#cart #cart_table").html(e.view),$(".cart_count").html(e.cartCount),$("#mega_nav .item_right .cart_total p").html(e.cartTotal+"/="),$.cachedScript("js/jquery.nice-number.js").done((function(e,t){console.log(t)})),$.cachedScript("js/main.js").done((function(e,t){console.log(t)}))):Swal.fire("Deleted!","Your file has been deleted.","success").then((function(){location.reload()})):Swal.fire({position:"top-end",icon:"error",title:"Unable to delete cart Item.",showConfirmButton:!1,timer:2e3})},error:function(){alert("Error")}})}))})),$(document).on("click","form a.delete-address",(function(){var e=$(this).data("id");void 0!==e?Swal.fire({title:"Are you really sure? ðŸ¤§",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){t.isConfirmed&&(location.href="/delete-delivery-address/"+e)})):Swal.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:'<a href="/contact-us">Report this issue?</a>'})})),$(document).on("click","#edit-profile .delete-phone",(function(){var e=$(this).data("id");void 0!==e?Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){t.isConfirmed&&(location.href="/delete-phone/"+e)})):Swal.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:'<a href="/contact-us">Report this issue?</a>'})})),$((function(){$.fn.extend({filterTable:function(){return this.each((function(){$(this).on("keyup",(function(){var e=$(this),t=e.val().toLowerCase(),n=e.closest("div").next().find("li");""===t?n.show():n.each((function(){var e=$(this);-1===e.text().toLowerCase().indexOf(t)?e.hide():e.show()}))}))}))}}),$('[data-action="filter"][class="search_text"]').filterTable()})),function(e){function t(e,t,n){"mousedown"===e?(t.timeout=setTimeout((function(){t.actualInterval=setInterval((function(){n()}),100)}),200),n()):(t.timeout&&clearTimeout(t.timeout),t.actualInterval&&clearInterval(t.actualInterval))}e.fn.niceNumber=function(n){var a=e.extend({autoSize:!0,autoSizeBuffer:1,buttonDecrement:"-",buttonIncrement:"+",buttonPosition:"around",onDecrement:!1,onIncrement:!1},n);return this.each((function(){var n=this,o=e(n),r=o.attr("max"),i=o.attr("min"),s=null,l=null;if(!o.attr("data-nice-number-initialized")){void 0!==r&&!1!==r&&(s=parseFloat(r)),void 0!==i&&!1!==i&&(l=parseFloat(i)),l&&!n.value&&o.val(l);var u=e("<div/>",{class:"nice-number"}).insertAfter(n),c={},d=e('<button class="nice-number-button-minus">').attr("type","button").html(a.buttonDecrement).on("mousedown mouseup mouseleave",(function(e){t(e.type,c,(function(){var e=parseFloat(o.val()||0);if(null==l||l<e){var t=e-1;o.val(t),a.onDecrement&&a.onDecrement(o,t,a)}})),"mouseup"!==e.type&&"mouseleave"!==e.type||o.trigger("input")})),m=e('<button class="nice-number-button-plus">').attr("type","button").html(a.buttonIncrement).on("mousedown mouseup mouseleave",(function(e){t(e.type,c,(function(){var e=parseFloat(o.val()||0);if(null==s||s>e){var t=e+1;o.val(t),a.onIncrement&&a.onIncrement(o,t,a)}})),"mouseup"!==e.type&&"mouseleave"!==e.type||o.trigger("input")}));switch(o.attr("data-nice-number-initialized",!0),a.buttonPosition){case"left":d.appendTo(u),m.appendTo(u),o.appendTo(u);break;case"right":o.appendTo(u),d.appendTo(u),m.appendTo(u);break;case"around":default:d.appendTo(u),o.appendTo(u),m.appendTo(u)}a.autoSize&&(o.width(o.val().length+a.autoSizeBuffer+"ch"),o.on("keyup input",(function(){o.animate({width:o.val().length+a.autoSizeBuffer+"ch"},200)})))}}))}}(jQuery);